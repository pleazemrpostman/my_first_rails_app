(function() {
  var context = this;

  (function() {
    (function() {
      var slice = [].slice;

      this.ActionCable = {
        INTERNAL: {
          "message_types": {
            "welcome": "welcome",
            "ping": "ping",
            "confirmation": "confirm_subscription",
            "rejection": "reject_subscription"
          },
          "default_mount_path": "/cable",
          "protocols": ["actioncable-v1-json", "actioncable-unsupported"]
        },
        WebSocket: window.WebSocket,
        logger: window.console,
        createConsumer: function(url) {
          var ref;
          if (url == null) {
            url = (ref = this.getConfig("url")) != null ? ref : this.INTERNAL.default_mount_path;
          }
          return new ActionCable.Consumer(this.createWebSocketURL(url));
        },
        getConfig: function(name) {
          var element;
          element = document.head.querySelector("meta[name='action-cable-" + name + "']");
          return element != null ? element.getAttribute("content") : void 0;
        },
        createWebSocketURL: function(url) {
          var a;
          if (url && !/^wss?:/i.test(url)) {
            a = document.createElement("a");
            a.href = url;
            a.href = a.href;
            a.protocol = a.protocol.replace("http", "ws");
            return a.href;
          } else {
            return url;
          }
        },
        startDebugging: function() {
          return this.debugging = true;
        },
        stopDebugging: function() {
          return this.debugging = null;
        },
        log: function() {
          var messages, ref;
          messages = 1 <= arguments.length ? slice.call(arguments, 0) : [];
          if (this.debugging) {
            messages.push(Date.now());
            return (ref = this.logger).log.apply(ref, ["[ActionCable]"].concat(slice.call(messages)));
          }
        }
      };

    }).call(this);
  }).call(context);

  var ActionCable = context.ActionCable;

  (function() {
    (function() {
      var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

      ActionCable.ConnectionMonitor = (function() {
        var clamp, now, secondsSince;

        ConnectionMonitor.pollInterval = {
          min: 3,
          max: 30
        };

        ConnectionMonitor.staleThreshold = 6;

        function ConnectionMonitor(connection) {
          this.connection = connection;
          this.visibilityDidChange = bind(this.visibilityDidChange, this);
          this.reconnectAttempts = 0;
        }

        ConnectionMonitor.prototype.start = function() {
          if (!this.isRunning()) {
            this.startedAt = now();
            delete this.stoppedAt;
            this.startPolling();
            document.addEventListener("visibilitychange", this.visibilityDidChange);
            return ActionCable.log("ConnectionMonitor started. pollInterval = " + (this.getPollInterval()) + " ms");
          }
        };

        ConnectionMonitor.prototype.stop = function() {
          if (this.isRunning()) {
            this.stoppedAt = now();
            this.stopPolling();
            document.removeEventListener("visibilitychange", this.visibilityDidChange);
            return ActionCable.log("ConnectionMonitor stopped");
          }
        };

        ConnectionMonitor.prototype.isRunning = function() {
          return (this.startedAt != null) && (this.stoppedAt == null);
        };

        ConnectionMonitor.prototype.recordPing = function() {
          return this.pingedAt = now();
        };

        ConnectionMonitor.prototype.recordConnect = function() {
          this.reconnectAttempts = 0;
          this.recordPing();
          delete this.disconnectedAt;
          return ActionCable.log("ConnectionMonitor recorded connect");
        };

        ConnectionMonitor.prototype.recordDisconnect = function() {
          this.disconnectedAt = now();
          return ActionCable.log("ConnectionMonitor recorded disconnect");
        };

        ConnectionMonitor.prototype.startPolling = function() {
          this.stopPolling();
          return this.poll();
        };

        ConnectionMonitor.prototype.stopPolling = function() {
          return clearTimeout(this.pollTimeout);
        };

        ConnectionMonitor.prototype.poll = function() {
          return this.pollTimeout = setTimeout((function(_this) {
            return function() {
              _this.reconnectIfStale();
              return _this.poll();
            };
          })(this), this.getPollInterval());
        };

        ConnectionMonitor.prototype.getPollInterval = function() {
          var interval, max, min, ref;
          ref = this.constructor.pollInterval, min = ref.min, max = ref.max;
          interval = 5 * Math.log(this.reconnectAttempts + 1);
          return Math.round(clamp(interval, min, max) * 1000);
        };

        ConnectionMonitor.prototype.reconnectIfStale = function() {
          if (this.connectionIsStale()) {
            ActionCable.log("ConnectionMonitor detected stale connection. reconnectAttempts = " + this.reconnectAttempts + ", pollInterval = " + (this.getPollInterval()) + " ms, time disconnected = " + (secondsSince(this.disconnectedAt)) + " s, stale threshold = " + this.constructor.staleThreshold + " s");
            this.reconnectAttempts++;
            if (this.disconnectedRecently()) {
              return ActionCable.log("ConnectionMonitor skipping reopening recent disconnect");
            } else {
              ActionCable.log("ConnectionMonitor reopening");
              return this.connection.reopen();
            }
          }
        };

        ConnectionMonitor.prototype.connectionIsStale = function() {
          var ref;
          return secondsSince((ref = this.pingedAt) != null ? ref : this.startedAt) > this.constructor.staleThreshold;
        };

        ConnectionMonitor.prototype.disconnectedRecently = function() {
          return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;
        };

        ConnectionMonitor.prototype.visibilityDidChange = function() {
          if (document.visibilityState === "visible") {
            return setTimeout((function(_this) {
              return function() {
                if (_this.connectionIsStale() || !_this.connection.isOpen()) {
                  ActionCable.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = " + document.visibilityState);
                  return _this.connection.reopen();
                }
              };
            })(this), 200);
          }
        };

        now = function() {
          return new Date().getTime();
        };

        secondsSince = function(time) {
          return (now() - time) / 1000;
        };

        clamp = function(number, min, max) {
          return Math.max(min, Math.min(max, number));
        };

        return ConnectionMonitor;

      })();

    }).call(this);
    (function() {
      var i, message_types, protocols, ref, supportedProtocols, unsupportedProtocol,
        slice = [].slice,
        bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

      ref = ActionCable.INTERNAL, message_types = ref.message_types, protocols = ref.protocols;

      supportedProtocols = 2 <= protocols.length ? slice.call(protocols, 0, i = protocols.length - 1) : (i = 0, []), unsupportedProtocol = protocols[i++];

      ActionCable.Connection = (function() {
        Connection.reopenDelay = 500;

        function Connection(consumer) {
          this.consumer = consumer;
          this.open = bind(this.open, this);
          this.subscriptions = this.consumer.subscriptions;
          this.monitor = new ActionCable.ConnectionMonitor(this);
          this.disconnected = true;
        }

        Connection.prototype.send = function(data) {
          if (this.isOpen()) {
            this.webSocket.send(JSON.stringify(data));
            return true;
          } else {
            return false;
          }
        };

        Connection.prototype.open = function() {
          if (this.isActive()) {
            ActionCable.log("Attempted to open WebSocket, but existing socket is " + (this.getState()));
            return false;
          } else {
            ActionCable.log("Opening WebSocket, current state is " + (this.getState()) + ", subprotocols: " + protocols);
            if (this.webSocket != null) {
              this.uninstallEventHandlers();
            }
            this.webSocket = new ActionCable.WebSocket(this.consumer.url, protocols);
            this.installEventHandlers();
            this.monitor.start();
            return true;
          }
        };

        Connection.prototype.close = function(arg) {
          var allowReconnect, ref1;
          allowReconnect = (arg != null ? arg : {
            allowReconnect: true
          }).allowReconnect;
          if (!allowReconnect) {
            this.monitor.stop();
          }
          if (this.isActive()) {
            return (ref1 = this.webSocket) != null ? ref1.close() : void 0;
          }
        };

        Connection.prototype.reopen = function() {
          var error;
          ActionCable.log("Reopening WebSocket, current state is " + (this.getState()));
          if (this.isActive()) {
            try {
              return this.close();
            } catch (error1) {
              error = error1;
              return ActionCable.log("Failed to reopen WebSocket", error);
            } finally {
              ActionCable.log("Reopening WebSocket in " + this.constructor.reopenDelay + "ms");
              setTimeout(this.open, this.constructor.reopenDelay);
            }
          } else {
            return this.open();
          }
        };

        Connection.prototype.getProtocol = function() {
          var ref1;
          return (ref1 = this.webSocket) != null ? ref1.protocol : void 0;
        };

        Connection.prototype.isOpen = function() {
          return this.isState("open");
        };

        Connection.prototype.isActive = function() {
          return this.isState("open", "connecting");
        };

        Connection.prototype.isProtocolSupported = function() {
          var ref1;
          return ref1 = this.getProtocol(), indexOf.call(supportedProtocols, ref1) >= 0;
        };

        Connection.prototype.isState = function() {
          var ref1, states;
          states = 1 <= arguments.length ? slice.call(arguments, 0) : [];
          return ref1 = this.getState(), indexOf.call(states, ref1) >= 0;
        };

        Connection.prototype.getState = function() {
          var ref1, state, value;
          for (state in WebSocket) {
            value = WebSocket[state];
            if (value === ((ref1 = this.webSocket) != null ? ref1.readyState : void 0)) {
              return state.toLowerCase();
            }
          }
          return null;
        };

        Connection.prototype.installEventHandlers = function() {
          var eventName, handler;
          for (eventName in this.events) {
            handler = this.events[eventName].bind(this);
            this.webSocket["on" + eventName] = handler;
          }
        };

        Connection.prototype.uninstallEventHandlers = function() {
          var eventName;
          for (eventName in this.events) {
            this.webSocket["on" + eventName] = function() {};
          }
        };

        Connection.prototype.events = {
          message: function(event) {
            var identifier, message, ref1, type;
            if (!this.isProtocolSupported()) {
              return;
            }
            ref1 = JSON.parse(event.data), identifier = ref1.identifier, message = ref1.message, type = ref1.type;
            switch (type) {
              case message_types.welcome:
                this.monitor.recordConnect();
                return this.subscriptions.reload();
              case message_types.ping:
                return this.monitor.recordPing();
              case message_types.confirmation:
                return this.subscriptions.notify(identifier, "connected");
              case message_types.rejection:
                return this.subscriptions.reject(identifier);
              default:
                return this.subscriptions.notify(identifier, "received", message);
            }
          },
          open: function() {
            ActionCable.log("WebSocket onopen event, using '" + (this.getProtocol()) + "' subprotocol");
            this.disconnected = false;
            if (!this.isProtocolSupported()) {
              ActionCable.log("Protocol is unsupported. Stopping monitor and disconnecting.");
              return this.close({
                allowReconnect: false
              });
            }
          },
          close: function(event) {
            ActionCable.log("WebSocket onclose event");
            if (this.disconnected) {
              return;
            }
            this.disconnected = true;
            this.monitor.recordDisconnect();
            return this.subscriptions.notifyAll("disconnected", {
              willAttemptReconnect: this.monitor.isRunning()
            });
          },
          error: function() {
            return ActionCable.log("WebSocket onerror event");
          }
        };

        return Connection;

      })();

    }).call(this);
    (function() {
      var slice = [].slice;

      ActionCable.Subscriptions = (function() {
        function Subscriptions(consumer) {
          this.consumer = consumer;
          this.subscriptions = [];
        }

        Subscriptions.prototype.create = function(channelName, mixin) {
          var channel, params, subscription;
          channel = channelName;
          params = typeof channel === "object" ? channel : {
            channel: channel
          };
          subscription = new ActionCable.Subscription(this.consumer, params, mixin);
          return this.add(subscription);
        };

        Subscriptions.prototype.add = function(subscription) {
          this.subscriptions.push(subscription);
          this.consumer.ensureActiveConnection();
          this.notify(subscription, "initialized");
          this.sendCommand(subscription, "subscribe");
          return subscription;
        };

        Subscriptions.prototype.remove = function(subscription) {
          this.forget(subscription);
          if (!this.findAll(subscription.identifier).length) {
            this.sendCommand(subscription, "unsubscribe");
          }
          return subscription;
        };

        Subscriptions.prototype.reject = function(identifier) {
          var i, len, ref, results, subscription;
          ref = this.findAll(identifier);
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            subscription = ref[i];
            this.forget(subscription);
            this.notify(subscription, "rejected");
            results.push(subscription);
          }
          return results;
        };

        Subscriptions.prototype.forget = function(subscription) {
          var s;
          this.subscriptions = (function() {
            var i, len, ref, results;
            ref = this.subscriptions;
            results = [];
            for (i = 0, len = ref.length; i < len; i++) {
              s = ref[i];
              if (s !== subscription) {
                results.push(s);
              }
            }
            return results;
          }).call(this);
          return subscription;
        };

        Subscriptions.prototype.findAll = function(identifier) {
          var i, len, ref, results, s;
          ref = this.subscriptions;
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            s = ref[i];
            if (s.identifier === identifier) {
              results.push(s);
            }
          }
          return results;
        };

        Subscriptions.prototype.reload = function() {
          var i, len, ref, results, subscription;
          ref = this.subscriptions;
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            subscription = ref[i];
            results.push(this.sendCommand(subscription, "subscribe"));
          }
          return results;
        };

        Subscriptions.prototype.notifyAll = function() {
          var args, callbackName, i, len, ref, results, subscription;
          callbackName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
          ref = this.subscriptions;
          results = [];
          for (i = 0, len = ref.length; i < len; i++) {
            subscription = ref[i];
            results.push(this.notify.apply(this, [subscription, callbackName].concat(slice.call(args))));
          }
          return results;
        };

        Subscriptions.prototype.notify = function() {
          var args, callbackName, i, len, results, subscription, subscriptions;
          subscription = arguments[0], callbackName = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];
          if (typeof subscription === "string") {
            subscriptions = this.findAll(subscription);
          } else {
            subscriptions = [subscription];
          }
          results = [];
          for (i = 0, len = subscriptions.length; i < len; i++) {
            subscription = subscriptions[i];
            results.push(typeof subscription[callbackName] === "function" ? subscription[callbackName].apply(subscription, args) : void 0);
          }
          return results;
        };

        Subscriptions.prototype.sendCommand = function(subscription, command) {
          var identifier;
          identifier = subscription.identifier;
          return this.consumer.send({
            command: command,
            identifier: identifier
          });
        };

        return Subscriptions;

      })();

    }).call(this);
    (function() {
      ActionCable.Subscription = (function() {
        var extend;

        function Subscription(consumer, params, mixin) {
          this.consumer = consumer;
          if (params == null) {
            params = {};
          }
          this.identifier = JSON.stringify(params);
          extend(this, mixin);
        }

        Subscription.prototype.perform = function(action, data) {
          if (data == null) {
            data = {};
          }
          data.action = action;
          return this.send(data);
        };

        Subscription.prototype.send = function(data) {
          return this.consumer.send({
            command: "message",
            identifier: this.identifier,
            data: JSON.stringify(data)
          });
        };

        Subscription.prototype.unsubscribe = function() {
          return this.consumer.subscriptions.remove(this);
        };

        extend = function(object, properties) {
          var key, value;
          if (properties != null) {
            for (key in properties) {
              value = properties[key];
              object[key] = value;
            }
          }
          return object;
        };

        return Subscription;

      })();

    }).call(this);
    (function() {
      ActionCable.Consumer = (function() {
        function Consumer(url) {
          this.url = url;
          this.subscriptions = new ActionCable.Subscriptions(this);
          this.connection = new ActionCable.Connection(this);
        }

        Consumer.prototype.send = function(data) {
          return this.connection.send(data);
        };

        Consumer.prototype.connect = function() {
          return this.connection.open();
        };

        Consumer.prototype.disconnect = function() {
          return this.connection.close({
            allowReconnect: false
          });
        };

        Consumer.prototype.ensureActiveConnection = function() {
          if (!this.connection.isActive()) {
            return this.connection.open();
          }
        };

        return Consumer;

      })();

    }).call(this);
  }).call(this);

  if (typeof module === "object" && module.exports) {
    module.exports = ActionCable;
  } else if (typeof define === "function" && define.amd) {
    define(ActionCable);
  }
}).call(this);
         20180704192850                                             ;P      ( f u n c t i o n ( )   { 
     v a r   c o n t e x t   =   t h i s ; 
 
     ( f u n c t i o n ( )   { 
         ( f u n c t i o n ( )   { 
             v a r   s l i c e   =   [ ] . s l i c e ; 
 
             t h i s . A c t i o n C a b l e   =   { 
                 I N T E R N A L :   { 
                     " m e s s a g e _ t y p e s " :   { 
                         " w e l c o m e " :   " w e l c o m e " , 
                         " p i n g " :   " p i n g " , 
                         " c o n f i r m a t i o n " :   " c o n f i r m _ s u b s c r i p t i o n " , 
                         " r e j e c t i o n " :   " r e j e c t _ s u b s c r i p t i o n " 
                     } , 
                     " d e f a u l t _ m o u n t _ p a t h " :   " / c a b l e " , 
                     " p r o t o c o l s " :   [ " a c t i o n c a b l e - v 1 - j s o n " ,   " a c t i o n c a b l e - u n s u p p o r t e d " ] 
                 } , 
                 W e b S o c k e t :   w i n d o w . W e b S o c k e t , 
                 l o g g e r :   w i n d o w . c o n s o l e , 
                 c r e a t e C o n s u m e r :   f u n c t i o n ( u r l )   { 
                     v a r   r e f ; 
                     i f   ( u r l   = =   n u l l )   { 
                         u r l   =   ( r e f   =   t h i s . g e t C o n f i g ( " u r l " ) )   ! =   n u l l   ?   r e f   :   t h i s . I N T E R N A L . d e f a u l t _ m o u n t _ p a t h ; 
                     } 
                     r e t u r n   n e w   A c t i o n C a b l e . C o n s u m e r ( t h i s . c r e a t e W e b S o c k e t U R L ( u r l ) ) ; 
                 } , 
                 g e t C o n f i g :   f u n c t i o n ( n a m e )   { 
                     v a r   e l e m e n t ; 
                     e l e m e n t   =   d o c u m e n t . h e a d . q u e r y S e l e c t o r ( " m e t a [ n a m e = ' a c t i o n - c a b l e - "   +   n a m e   +   " ' ] " ) ; 
                     r e t u r n   e l e m e n t   ! =   n u l l   ?   e l e m e n t . g e t A t t r i b u t e ( " c o n t e n t " )   :   v o i d   0 ; 
                 } , 
                 c r e a t e W e b S o c k e t U R L :   f u n c t i o n ( u r l )   { 
                     v a r   a ; 
                     i f   ( u r l   & &   ! / ^ w s s ? : / i . t e s t ( u r l ) )   { 
                         a   =   d o c u m e n t . c r e a t e E l e m e n t ( " a " ) ; 
                         a . h r e f   =   u r l ; 
                         a . h r e f   =   a . h r e f ; 
                         a . p r o t o c o l   =   a . p r o t o c o l . r e p l a c e ( " h t t p " ,   " w s " ) ; 
                         r e t u r n   a . h r e f ; 
                     }   e l s e   { 
                         r e t u r n   u r l ; 
                     } 
                 } , 
                 s t a r t D e b u g g i n g :   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . d e b u g g i n g   =   t r u e ; 
                 } , 
                 s t o p D e b u g g i n g :   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . d e b u g g i n g   =   n u l l ; 
                 } , 
                 l o g :   f u n c t i o n ( )   { 
                     v a r   m e s s a g e s ,   r e f ; 
                     m e s s a g e s   =   1   < =   a r g u m e n t s . l e n g t h   ?   s l i c e . c a l l ( a r g u m e n t s ,   0 )   :   [ ] ; 
                     i f   ( t h i s . d e b u g g i n g )   { 
                         m e s s a g e s . p u s h ( D a t e . n o w ( ) ) ; 
                         r e t u r n   ( r e f   =   t h i s . l o g g e r ) . l o g . a p p l y ( r e f ,   [ " [ A c t i o n C a b l e ] " ] . c o n c a t ( s l i c e . c a l l ( m e s s a g e s ) ) ) ; 
                     } 
                 } 
             } ; 
 
         } ) . c a l l ( t h i s ) ; 
     } ) . c a l l ( c o n t e x t ) ; 
 
     v a r   A c t i o n C a b l e   =   c o n t e x t . A c t i o n C a b l e ; 
 
     ( f u n c t i o n ( )   { 
         ( f u n c t i o n ( )   { 
             v a r   b i n d   =   f u n c t i o n ( f n ,   m e ) {   r e t u r n   f u n c t i o n ( ) {   r e t u r n   f n . a p p l y ( m e ,   a r g u m e n t s ) ;   } ;   } ; 
 
             A c t i o n C a b l e . C o n n e c t i o n M o n i t o r   =   ( f u n c t i o n ( )   { 
                 v a r   c l a m p ,   n o w ,   s e c o n d s S i n c e ; 
 
                 C o n n e c t i o n M o n i t o r . p o l l I n t e r v a l   =   { 
                     m i n :   3 , 
                     m a x :   3 0 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . s t a l e T h r e s h o l d   =   6 ; 
 
                 f u n c t i o n   C o n n e c t i o n M o n i t o r ( c o n n e c t i o n )   { 
                     t h i s . c o n n e c t i o n   =   c o n n e c t i o n ; 
                     t h i s . v i s i b i l i t y D i d C h a n g e   =   b i n d ( t h i s . v i s i b i l i t y D i d C h a n g e ,   t h i s ) ; 
                     t h i s . r e c o n n e c t A t t e m p t s   =   0 ; 
                 } 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . s t a r t   =   f u n c t i o n ( )   { 
                     i f   ( ! t h i s . i s R u n n i n g ( ) )   { 
                         t h i s . s t a r t e d A t   =   n o w ( ) ; 
                         d e l e t e   t h i s . s t o p p e d A t ; 
                         t h i s . s t a r t P o l l i n g ( ) ; 
                         d o c u m e n t . a d d E v e n t L i s t e n e r ( " v i s i b i l i t y c h a n g e " ,   t h i s . v i s i b i l i t y D i d C h a n g e ) ; 
                         r e t u r n   A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   s t a r t e d .   p o l l I n t e r v a l   =   "   +   ( t h i s . g e t P o l l I n t e r v a l ( ) )   +   "   m s " ) ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . s t o p   =   f u n c t i o n ( )   { 
                     i f   ( t h i s . i s R u n n i n g ( ) )   { 
                         t h i s . s t o p p e d A t   =   n o w ( ) ; 
                         t h i s . s t o p P o l l i n g ( ) ; 
                         d o c u m e n t . r e m o v e E v e n t L i s t e n e r ( " v i s i b i l i t y c h a n g e " ,   t h i s . v i s i b i l i t y D i d C h a n g e ) ; 
                         r e t u r n   A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   s t o p p e d " ) ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . i s R u n n i n g   =   f u n c t i o n ( )   { 
                     r e t u r n   ( t h i s . s t a r t e d A t   ! =   n u l l )   & &   ( t h i s . s t o p p e d A t   = =   n u l l ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . r e c o r d P i n g   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . p i n g e d A t   =   n o w ( ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . r e c o r d C o n n e c t   =   f u n c t i o n ( )   { 
                     t h i s . r e c o n n e c t A t t e m p t s   =   0 ; 
                     t h i s . r e c o r d P i n g ( ) ; 
                     d e l e t e   t h i s . d i s c o n n e c t e d A t ; 
                     r e t u r n   A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   r e c o r d e d   c o n n e c t " ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . r e c o r d D i s c o n n e c t   =   f u n c t i o n ( )   { 
                     t h i s . d i s c o n n e c t e d A t   =   n o w ( ) ; 
                     r e t u r n   A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   r e c o r d e d   d i s c o n n e c t " ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . s t a r t P o l l i n g   =   f u n c t i o n ( )   { 
                     t h i s . s t o p P o l l i n g ( ) ; 
                     r e t u r n   t h i s . p o l l ( ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . s t o p P o l l i n g   =   f u n c t i o n ( )   { 
                     r e t u r n   c l e a r T i m e o u t ( t h i s . p o l l T i m e o u t ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . p o l l   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . p o l l T i m e o u t   =   s e t T i m e o u t ( ( f u n c t i o n ( _ t h i s )   { 
                         r e t u r n   f u n c t i o n ( )   { 
                             _ t h i s . r e c o n n e c t I f S t a l e ( ) ; 
                             r e t u r n   _ t h i s . p o l l ( ) ; 
                         } ; 
                     } ) ( t h i s ) ,   t h i s . g e t P o l l I n t e r v a l ( ) ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . g e t P o l l I n t e r v a l   =   f u n c t i o n ( )   { 
                     v a r   i n t e r v a l ,   m a x ,   m i n ,   r e f ; 
                     r e f   =   t h i s . c o n s t r u c t o r . p o l l I n t e r v a l ,   m i n   =   r e f . m i n ,   m a x   =   r e f . m a x ; 
                     i n t e r v a l   =   5   *   M a t h . l o g ( t h i s . r e c o n n e c t A t t e m p t s   +   1 ) ; 
                     r e t u r n   M a t h . r o u n d ( c l a m p ( i n t e r v a l ,   m i n ,   m a x )   *   1 0 0 0 ) ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . r e c o n n e c t I f S t a l e   =   f u n c t i o n ( )   { 
                     i f   ( t h i s . c o n n e c t i o n I s S t a l e ( ) )   { 
                         A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   d e t e c t e d   s t a l e   c o n n e c t i o n .   r e c o n n e c t A t t e m p t s   =   "   +   t h i s . r e c o n n e c t A t t e m p t s   +   " ,   p o l l I n t e r v a l   =   "   +   ( t h i s . g e t P o l l I n t e r v a l ( ) )   +   "   m s ,   t i m e   d i s c o n n e c t e d   =   "   +   ( s e c o n d s S i n c e ( t h i s . d i s c o n n e c t e d A t ) )   +   "   s ,   s t a l e   t h r e s h o l d   =   "   +   t h i s . c o n s t r u c t o r . s t a l e T h r e s h o l d   +   "   s " ) ; 
                         t h i s . r e c o n n e c t A t t e m p t s + + ; 
                         i f   ( t h i s . d i s c o n n e c t e d R e c e n t l y ( ) )   { 
                             r e t u r n   A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   s k i p p i n g   r e o p e n i n g   r e c e n t   d i s c o n n e c t " ) ; 
                         }   e l s e   { 
                             A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   r e o p e n i n g " ) ; 
                             r e t u r n   t h i s . c o n n e c t i o n . r e o p e n ( ) ; 
                         } 
                     } 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . c o n n e c t i o n I s S t a l e   =   f u n c t i o n ( )   { 
                     v a r   r e f ; 
                     r e t u r n   s e c o n d s S i n c e ( ( r e f   =   t h i s . p i n g e d A t )   ! =   n u l l   ?   r e f   :   t h i s . s t a r t e d A t )   >   t h i s . c o n s t r u c t o r . s t a l e T h r e s h o l d ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . d i s c o n n e c t e d R e c e n t l y   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . d i s c o n n e c t e d A t   & &   s e c o n d s S i n c e ( t h i s . d i s c o n n e c t e d A t )   <   t h i s . c o n s t r u c t o r . s t a l e T h r e s h o l d ; 
                 } ; 
 
                 C o n n e c t i o n M o n i t o r . p r o t o t y p e . v i s i b i l i t y D i d C h a n g e   =   f u n c t i o n ( )   { 
                     i f   ( d o c u m e n t . v i s i b i l i t y S t a t e   = = =   " v i s i b l e " )   { 
                         r e t u r n   s e t T i m e o u t ( ( f u n c t i o n ( _ t h i s )   { 
                             r e t u r n   f u n c t i o n ( )   { 
                                 i f   ( _ t h i s . c o n n e c t i o n I s S t a l e ( )   | |   ! _ t h i s . c o n n e c t i o n . i s O p e n ( ) )   { 
                                     A c t i o n C a b l e . l o g ( " C o n n e c t i o n M o n i t o r   r e o p e n i n g   s t a l e   c o n n e c t i o n   o n   v i s i b i l i t y c h a n g e .   v i s b i l i t y S t a t e   =   "   +   d o c u m e n t . v i s i b i l i t y S t a t e ) ; 
                                     r e t u r n   _ t h i s . c o n n e c t i o n . r e o p e n ( ) ; 
                                 } 
                             } ; 
                         } ) ( t h i s ) ,   2 0 0 ) ; 
                     } 
                 } ; 
 
                 n o w   =   f u n c t i o n ( )   { 
                     r e t u r n   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                 } ; 
 
                 s e c o n d s S i n c e   =   f u n c t i o n ( t i m e )   { 
                     r e t u r n   ( n o w ( )   -   t i m e )   /   1 0 0 0 ; 
                 } ; 
 
                 c l a m p   =   f u n c t i o n ( n u m b e r ,   m i n ,   m a x )   { 
                     r e t u r n   M a t h . m a x ( m i n ,   M a t h . m i n ( m a x ,   n u m b e r ) ) ; 
                 } ; 
 
                 r e t u r n   C o n n e c t i o n M o n i t o r ; 
 
             } ) ( ) ; 
 
         } ) . c a l l ( t h i s ) ; 
         ( f u n c t i o n ( )   { 
             v a r   i ,   m e s s a g e _ t y p e s ,   p r o t o c o l s ,   r e f ,   s u p p o r t e d P r o t o c o l s ,   u n s u p p o r t e d P r o t o c o l , 
                 s l i c e   =   [ ] . s l i c e , 
                 b i n d   =   f u n c t i o n ( f n ,   m e ) {   r e t u r n   f u n c t i o n ( ) {   r e t u r n   f n . a p p l y ( m e ,   a r g u m e n t s ) ;   } ;   } , 
                 i n d e x O f   =   [ ] . i n d e x O f   | |   f u n c t i o n ( i t e m )   {   f o r   ( v a r   i   =   0 ,   l   =   t h i s . l e n g t h ;   i   <   l ;   i + + )   {   i f   ( i   i n   t h i s   & &   t h i s [ i ]   = = =   i t e m )   r e t u r n   i ;   }   r e t u r n   - 1 ;   } ; 
 
             r e f   =   A c t i o n C a b l e . I N T E R N A L ,   m e s s a g e _ t y p e s   =   r e f . m e s s a g e _ t y p e s ,   p r o t o c o l s   =   r e f . p r o t o c o l s ; 
 
             s u p p o r t e d P r o t o c o l s   =   2   < =   p r o t o c o l s . l e n g t h   ?   s l i c e . c a l l ( p r o t o c o l s ,   0 ,   i   =   p r o t o c o l s . l e n g t h   -   1 )   :   ( i   =   0 ,   [ ] ) ,   u n s u p p o r t e d P r o t o c o l   =   p r o t o c o l s [ i + + ] ; 
 
             A c t i o n C a b l e . C o n n e c t i o n   =   ( f u n c t i o n ( )   { 
                 C o n n e c t i o n . r e o p e n D e l a y   =   5 0 0 ; 
 
                 f u n c t i o n   C o n n e c t i o n ( c o n s u m e r )   { 
                     t h i s . c o n s u m e r   =   c o n s u m e r ; 
                     t h i s . o p e n   =   b i n d ( t h i s . o p e n ,   t h i s ) ; 
                     t h i s . s u b s c r i p t i o n s   =   t h i s . c o n s u m e r . s u b s c r i p t i o n s ; 
                     t h i s . m o n i t o r   =   n e w   A c t i o n C a b l e . C o n n e c t i o n M o n i t o r ( t h i s ) ; 
                     t h i s . d i s c o n n e c t e d   =   t r u e ; 
                 } 
 
                 C o n n e c t i o n . p r o t o t y p e . s e n d   =   f u n c t i o n ( d a t a )   { 
                     i f   ( t h i s . i s O p e n ( ) )   { 
                         t h i s . w e b S o c k e t . s e n d ( J S O N . s t r i n g i f y ( d a t a ) ) ; 
                         r e t u r n   t r u e ; 
                     }   e l s e   { 
                         r e t u r n   f a l s e ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . o p e n   =   f u n c t i o n ( )   { 
                     i f   ( t h i s . i s A c t i v e ( ) )   { 
                         A c t i o n C a b l e . l o g ( " A t t e m p t e d   t o   o p e n   W e b S o c k e t ,   b u t   e x i s t i n g   s o c k e t   i s   "   +   ( t h i s . g e t S t a t e ( ) ) ) ; 
                         r e t u r n   f a l s e ; 
                     }   e l s e   { 
                         A c t i o n C a b l e . l o g ( " O p e n i n g   W e b S o c k e t ,   c u r r e n t   s t a t e   i s   "   +   ( t h i s . g e t S t a t e ( ) )   +   " ,   s u b p r o t o c o l s :   "   +   p r o t o c o l s ) ; 
                         i f   ( t h i s . w e b S o c k e t   ! =   n u l l )   { 
                             t h i s . u n i n s t a l l E v e n t H a n d l e r s ( ) ; 
                         } 
                         t h i s . w e b S o c k e t   =   n e w   A c t i o n C a b l e . W e b S o c k e t ( t h i s . c o n s u m e r . u r l ,   p r o t o c o l s ) ; 
                         t h i s . i n s t a l l E v e n t H a n d l e r s ( ) ; 
                         t h i s . m o n i t o r . s t a r t ( ) ; 
                         r e t u r n   t r u e ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . c l o s e   =   f u n c t i o n ( a r g )   { 
                     v a r   a l l o w R e c o n n e c t ,   r e f 1 ; 
                     a l l o w R e c o n n e c t   =   ( a r g   ! =   n u l l   ?   a r g   :   { 
                         a l l o w R e c o n n e c t :   t r u e 
                     } ) . a l l o w R e c o n n e c t ; 
                     i f   ( ! a l l o w R e c o n n e c t )   { 
                         t h i s . m o n i t o r . s t o p ( ) ; 
                     } 
                     i f   ( t h i s . i s A c t i v e ( ) )   { 
                         r e t u r n   ( r e f 1   =   t h i s . w e b S o c k e t )   ! =   n u l l   ?   r e f 1 . c l o s e ( )   :   v o i d   0 ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . r e o p e n   =   f u n c t i o n ( )   { 
                     v a r   e r r o r ; 
                     A c t i o n C a b l e . l o g ( " R e o p e n i n g   W e b S o c k e t ,   c u r r e n t   s t a t e   i s   "   +   ( t h i s . g e t S t a t e ( ) ) ) ; 
                     i f   ( t h i s . i s A c t i v e ( ) )   { 
                         t r y   { 
                             r e t u r n   t h i s . c l o s e ( ) ; 
                         }   c a t c h   ( e r r o r 1 )   { 
                             e r r o r   =   e r r o r 1 ; 
                             r e t u r n   A c t i o n C a b l e . l o g ( " F a i l e d   t o   r e o p e n   W e b S o c k e t " ,   e r r o r ) ; 
                         }   f i n a l l y   { 
                             A c t i o n C a b l e . l o g ( " R e o p e n i n g   W e b S o c k e t   i n   "   +   t h i s . c o n s t r u c t o r . r e o p e n D e l a y   +   " m s " ) ; 
                             s e t T i m e o u t ( t h i s . o p e n ,   t h i s . c o n s t r u c t o r . r e o p e n D e l a y ) ; 
                         } 
                     }   e l s e   { 
                         r e t u r n   t h i s . o p e n ( ) ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . g e t P r o t o c o l   =   f u n c t i o n ( )   { 
                     v a r   r e f 1 ; 
                     r e t u r n   ( r e f 1   =   t h i s . w e b S o c k e t )   ! =   n u l l   ?   r e f 1 . p r o t o c o l   :   v o i d   0 ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . i s O p e n   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . i s S t a t e ( " o p e n " ) ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . i s A c t i v e   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . i s S t a t e ( " o p e n " ,   " c o n n e c t i n g " ) ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . i s P r o t o c o l S u p p o r t e d   =   f u n c t i o n ( )   { 
                     v a r   r e f 1 ; 
                     r e t u r n   r e f 1   =   t h i s . g e t P r o t o c o l ( ) ,   i n d e x O f . c a l l ( s u p p o r t e d P r o t o c o l s ,   r e f 1 )   > =   0 ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . i s S t a t e   =   f u n c t i o n ( )   { 
                     v a r   r e f 1 ,   s t a t e s ; 
                     s t a t e s   =   1   < =   a r g u m e n t s . l e n g t h   ?   s l i c e . c a l l ( a r g u m e n t s ,   0 )   :   [ ] ; 
                     r e t u r n   r e f 1   =   t h i s . g e t S t a t e ( ) ,   i n d e x O f . c a l l ( s t a t e s ,   r e f 1 )   > =   0 ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . g e t S t a t e   =   f u n c t i o n ( )   { 
                     v a r   r e f 1 ,   s t a t e ,   v a l u e ; 
                     f o r   ( s t a t e   i n   W e b S o c k e t )   { 
                         v a l u e   =   W e b S o c k e t [ s t a t e ] ; 
                         i f   ( v a l u e   = = =   ( ( r e f 1   =   t h i s . w e b S o c k e t )   ! =   n u l l   ?   r e f 1 . r e a d y S t a t e   :   v o i d   0 ) )   { 
                             r e t u r n   s t a t e . t o L o w e r C a s e ( ) ; 
                         } 
                     } 
                     r e t u r n   n u l l ; 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . i n s t a l l E v e n t H a n d l e r s   =   f u n c t i o n ( )   { 
                     v a r   e v e n t N a m e ,   h a n d l e r ; 
                     f o r   ( e v e n t N a m e   i n   t h i s . e v e n t s )   { 
                         h a n d l e r   =   t h i s . e v e n t s [ e v e n t N a m e ] . b i n d ( t h i s ) ; 
                         t h i s . w e b S o c k e t [ " o n "   +   e v e n t N a m e ]   =   h a n d l e r ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . u n i n s t a l l E v e n t H a n d l e r s   =   f u n c t i o n ( )   { 
                     v a r   e v e n t N a m e ; 
                     f o r   ( e v e n t N a m e   i n   t h i s . e v e n t s )   { 
                         t h i s . w e b S o c k e t [ " o n "   +   e v e n t N a m e ]   =   f u n c t i o n ( )   { } ; 
                     } 
                 } ; 
 
                 C o n n e c t i o n . p r o t o t y p e . e v e n t s   =   { 
                     m e s s a g e :   f u n c t i o n ( e v e n t )   { 
                         v a r   i d e n t i f i e r ,   m e s s a g e ,   r e f 1 ,   t y p e ; 
                         i f   ( ! t h i s . i s P r o t o c o l S u p p o r t e d ( ) )   { 
                             r e t u r n ; 
                         } 
                         r e f 1   =   J S O N . p a r s e ( e v e n t . d a t a ) ,   i d e n t i f i e r   =   r e f 1 . i d e n t i f i e r ,   m e s s a g e   =   r e f 1 . m e s s a g e ,   t y p e   =   r e f 1 . t y p e ; 
                         s w i t c h   ( t y p e )   { 
                             c a s e   m e s s a g e _ t y p e s . w e l c o m e : 
                                 t h i s . m o n i t o r . r e c o r d C o n n e c t ( ) ; 
                                 r e t u r n   t h i s . s u b s c r i p t i o n s . r e l o a d ( ) ; 
                             c a s e   m e s s a g e _ t y p e s . p i n g : 
                                 r e t u r n   t h i s . m o n i t o r . r e c o r d P i n g ( ) ; 
                             c a s e   m e s s a g e _ t y p e s . c o n f i r m a t i o n : 
                                 r e t u r n   t h i s . s u b s c r i p t i o n s . n o t i f y ( i d e n t i f i e r ,   " c o n n e c t e d " ) ; 
                             c a s e   m e s s a g e _ t y p e s . r e j e c t i o n : 
                                 r e t u r n   t h i s . s u b s c r i p t i o n s . r e j e c t ( i d e n t i f i e r ) ; 
                             d e f a u l t : 
                                 r e t u r n   t h i s . s u b s c r i p t i o n s . n o t i f y ( i d e n t i f i e r ,   " r e c e i v e d " ,   m e s s a g e ) ; 
                         } 
                     } , 
                     o p e n :   f u n c t i o n ( )   { 
                         A c t i o n C a b l e . l o g ( " W e b S o c k e t   o n o p e n   e v e n t ,   u s i n g   ' "   +   ( t h i s . g e t P r o t o c o l ( ) )   +   " '   s u b p r o t o c o l " ) ; 
                         t h i s . d i s c o n n e c t e d   =   f a l s e ; 
                         i f   ( ! t h i s . i s P r o t o c o l S u p p o r t e d ( ) )   { 
                             A c t i o n C a b l e . l o g ( " P r o t o c o l   i s   u n s u p p o r t e d .   S t o p p i n g   m o n i t o r   a n d   d i s c o n n e c t i n g . " ) ; 
                             r e t u r n   t h i s . c l o s e ( { 
                                 a l l o w R e c o n n e c t :   f a l s e 
                             } ) ; 
                         } 
                     } , 
                     c l o s e :   f u n c t i o n ( e v e n t )   { 
                         A c t i o n C a b l e . l o g ( " W e b S o c k e t   o n c l o s e   e v e n t " ) ; 
                         i f   ( t h i s . d i s c o n n e c t e d )   { 
                             r e t u r n ; 
                         } 
                         t h i s . d i s c o n n e c t e d   =   t r u e ; 
                         t h i s . m o n i t o r . r e c o r d D i s c o n n e c t ( ) ; 
                         r e t u r n   t h i s . s u b s c r i p t i o n s . n o t i f y A l l ( " d i s c o n n e c t e d " ,   { 
                             w i l l A t t e m p t R e c o n n e c t :   t h i s . m o n i t o r . i s R u n n i n g ( ) 
                         } ) ; 
                     } , 
                     e r r o r :   f u n c t i o n ( )   { 
                         r e t u r n   A c t i o n C a b l e . l o g ( " W e b S o c k e t   o n e r r o r   e v e n t " ) ; 
                     } 
                 } ; 
 
                 r e t u r n   C o n n e c t i o n ; 
 
             } ) ( ) ; 
 
         } ) . c a l l ( t h i s ) ; 
         ( f u n c t i o n ( )   { 
             v a r   s l i c e   =   [ ] . s l i c e ; 
 
             A c t i o n C a b l e . S u b s c r i p t i o n s   =   ( f u n c t i o n ( )   { 
                 f u n c t i o n   S u b s c r i p t i o n s ( c o n s u m e r )   { 
                     t h i s . c o n s u m e r   =   c o n s u m e r ; 
                     t h i s . s u b s c r i p t i o n s   =   [ ] ; 
                 } 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . c r e a t e   =   f u n c t i o n ( c h a n n e l N a m e ,   m i x i n )   { 
                     v a r   c h a n n e l ,   p a r a m s ,   s u b s c r i p t i o n ; 
                     c h a n n e l   =   c h a n n e l N a m e ; 
                     p a r a m s   =   t y p e o f   c h a n n e l   = = =   " o b j e c t "   ?   c h a n n e l   :   { 
                         c h a n n e l :   c h a n n e l 
                     } ; 
                     s u b s c r i p t i o n   =   n e w   A c t i o n C a b l e . S u b s c r i p t i o n ( t h i s . c o n s u m e r ,   p a r a m s ,   m i x i n ) ; 
                     r e t u r n   t h i s . a d d ( s u b s c r i p t i o n ) ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . a d d   =   f u n c t i o n ( s u b s c r i p t i o n )   { 
                     t h i s . s u b s c r i p t i o n s . p u s h ( s u b s c r i p t i o n ) ; 
                     t h i s . c o n s u m e r . e n s u r e A c t i v e C o n n e c t i o n ( ) ; 
                     t h i s . n o t i f y ( s u b s c r i p t i o n ,   " i n i t i a l i z e d " ) ; 
                     t h i s . s e n d C o m m a n d ( s u b s c r i p t i o n ,   " s u b s c r i b e " ) ; 
                     r e t u r n   s u b s c r i p t i o n ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . r e m o v e   =   f u n c t i o n ( s u b s c r i p t i o n )   { 
                     t h i s . f o r g e t ( s u b s c r i p t i o n ) ; 
                     i f   ( ! t h i s . f i n d A l l ( s u b s c r i p t i o n . i d e n t i f i e r ) . l e n g t h )   { 
                         t h i s . s e n d C o m m a n d ( s u b s c r i p t i o n ,   " u n s u b s c r i b e " ) ; 
                     } 
                     r e t u r n   s u b s c r i p t i o n ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . r e j e c t   =   f u n c t i o n ( i d e n t i f i e r )   { 
                     v a r   i ,   l e n ,   r e f ,   r e s u l t s ,   s u b s c r i p t i o n ; 
                     r e f   =   t h i s . f i n d A l l ( i d e n t i f i e r ) ; 
                     r e s u l t s   =   [ ] ; 
                     f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                         s u b s c r i p t i o n   =   r e f [ i ] ; 
                         t h i s . f o r g e t ( s u b s c r i p t i o n ) ; 
                         t h i s . n o t i f y ( s u b s c r i p t i o n ,   " r e j e c t e d " ) ; 
                         r e s u l t s . p u s h ( s u b s c r i p t i o n ) ; 
                     } 
                     r e t u r n   r e s u l t s ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . f o r g e t   =   f u n c t i o n ( s u b s c r i p t i o n )   { 
                     v a r   s ; 
                     t h i s . s u b s c r i p t i o n s   =   ( f u n c t i o n ( )   { 
                         v a r   i ,   l e n ,   r e f ,   r e s u l t s ; 
                         r e f   =   t h i s . s u b s c r i p t i o n s ; 
                         r e s u l t s   =   [ ] ; 
                         f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                             s   =   r e f [ i ] ; 
                             i f   ( s   ! = =   s u b s c r i p t i o n )   { 
                                 r e s u l t s . p u s h ( s ) ; 
                             } 
                         } 
                         r e t u r n   r e s u l t s ; 
                     } ) . c a l l ( t h i s ) ; 
                     r e t u r n   s u b s c r i p t i o n ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . f i n d A l l   =   f u n c t i o n ( i d e n t i f i e r )   { 
                     v a r   i ,   l e n ,   r e f ,   r e s u l t s ,   s ; 
                     r e f   =   t h i s . s u b s c r i p t i o n s ; 
                     r e s u l t s   =   [ ] ; 
                     f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                         s   =   r e f [ i ] ; 
                         i f   ( s . i d e n t i f i e r   = = =   i d e n t i f i e r )   { 
                             r e s u l t s . p u s h ( s ) ; 
                         } 
                     } 
                     r e t u r n   r e s u l t s ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . r e l o a d   =   f u n c t i o n ( )   { 
                     v a r   i ,   l e n ,   r e f ,   r e s u l t s ,   s u b s c r i p t i o n ; 
                     r e f   =   t h i s . s u b s c r i p t i o n s ; 
                     r e s u l t s   =   [ ] ; 
                     f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                         s u b s c r i p t i o n   =   r e f [ i ] ; 
                         r e s u l t s . p u s h ( t h i s . s e n d C o m m a n d ( s u b s c r i p t i o n ,   " s u b s c r i b e " ) ) ; 
                     } 
                     r e t u r n   r e s u l t s ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . n o t i f y A l l   =   f u n c t i o n ( )   { 
                     v a r   a r g s ,   c a l l b a c k N a m e ,   i ,   l e n ,   r e f ,   r e s u l t s ,   s u b s c r i p t i o n ; 
                     c a l l b a c k N a m e   =   a r g u m e n t s [ 0 ] ,   a r g s   =   2   < =   a r g u m e n t s . l e n g t h   ?   s l i c e . c a l l ( a r g u m e n t s ,   1 )   :   [ ] ; 
                     r e f   =   t h i s . s u b s c r i p t i o n s ; 
                     r e s u l t s   =   [ ] ; 
                     f o r   ( i   =   0 ,   l e n   =   r e f . l e n g t h ;   i   <   l e n ;   i + + )   { 
                         s u b s c r i p t i o n   =   r e f [ i ] ; 
                         r e s u l t s . p u s h ( t h i s . n o t i f y . a p p l y ( t h i s ,   [ s u b s c r i p t i o n ,   c a l l b a c k N a m e ] . c o n c a t ( s l i c e . c a l l ( a r g s ) ) ) ) ; 
                     } 
                     r e t u r n   r e s u l t s ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . n o t i f y   =   f u n c t i o n ( )   { 
                     v a r   a r g s ,   c a l l b a c k N a m e ,   i ,   l e n ,   r e s u l t s ,   s u b s c r i p t i o n ,   s u b s c r i p t i o n s ; 
                     s u b s c r i p t i o n   =   a r g u m e n t s [ 0 ] ,   c a l l b a c k N a m e   =   a r g u m e n t s [ 1 ] ,   a r g s   =   3   < =   a r g u m e n t s . l e n g t h   ?   s l i c e . c a l l ( a r g u m e n t s ,   2 )   :   [ ] ; 
                     i f   ( t y p e o f   s u b s c r i p t i o n   = = =   " s t r i n g " )   { 
                         s u b s c r i p t i o n s   =   t h i s . f i n d A l l ( s u b s c r i p t i o n ) ; 
                     }   e l s e   { 
                         s u b s c r i p t i o n s   =   [ s u b s c r i p t i o n ] ; 
                     } 
                     r e s u l t s   =   [ ] ; 
                     f o r   ( i   =   0 ,   l e n   =   s u b s c r i p t i o n s . l e n g t h ;   i   <   l e n ;   i + + )   { 
                         s u b s c r i p t i o n   =   s u b s c r i p t i o n s [ i ] ; 
                         r e s u l t s . p u s h ( t y p e o f   s u b s c r i p t i o n [ c a l l b a c k N a m e ]   = = =   " f u n c t i o n "   ?   s u b s c r i p t i o n [ c a l l b a c k N a m e ] . a p p l y ( s u b s c r i p t i o n ,   a r g s )   :   v o i d   0 ) ; 
                     } 
                     r e t u r n   r e s u l t s ; 
                 } ; 
 
                 S u b s c r i p t i o n s . p r o t o t y p e . s e n d C o m m a n d   =   f u n c t i o n ( s u b s c r i p t i o n ,   c o m m a n d )   { 
                     v a r   i d e n t i f i e r ; 
                     i d e n t i f i e r   =   s u b s c r i p t i o n . i d e n t i f i e r ; 
                     r e t u r n   t h i s . c o n s u m e r . s e n d ( { 
                         c o m m a n d :   c o m m a n d , 
                         i d e n t i f i e r :   i d e n t i f i e r 
                     } ) ; 
                 } ; 
 
                 r e t u r n   S u b s c r i p t i o n s ; 
 
             } ) ( ) ; 
 
         } ) . c a l l ( t h i s ) ; 
         ( f u n c t i o n ( )   { 
             A c t i o n C a b l e . S u b s c r i p t i o n   =   ( f u n c t i o n ( )   { 
                 v a r   e x t e n d ; 
 
                 f u n c t i o n   S u b s c r i p t i o n ( c o n s u m e r ,   p a r a m s ,   m i x i n )   { 
                     t h i s . c o n s u m e r   =   c o n s u m e r ; 
                     i f   ( p a r a m s   = =   n u l l )   { 
                         p a r a m s   =   { } ; 
                     } 
                     t h i s . i d e n t i f i e r   =   J S O N . s t r i n g i f y ( p a r a m s ) ; 
                     e x t e n d ( t h i s ,   m i x i n ) ; 
                 } 
 
                 S u b s c r i p t i o n . p r o t o t y p e . p e r f o r m   =   f u n c t i o n ( a c t i o n ,   d a t a )   { 
                     i f   ( d a t a   = =   n u l l )   { 
                         d a t a   =   { } ; 
                     } 
                     d a t a . a c t i o n   =   a c t i o n ; 
                     r e t u r n   t h i s . s e n d ( d a t a ) ; 
                 } ; 
 
                 S u b s c r i p t i o n . p r o t o t y p e . s e n d   =   f u n c t i o n ( d a t a )   { 
                     r e t u r n   t h i s . c o n s u m e r . s e n d ( { 
                         c o m m a n d :   " m e s s a g e " , 
                         i d e n t i f i e r :   t h i s . i d e n t i f i e r , 
                         d a t a :   J S O N . s t r i n g i f y ( d a t a ) 
                     } ) ; 
                 } ; 
 
                 S u b s c r i p t i o n . p r o t o t y p e . u n s u b s c r i b e   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . c o n s u m e r . s u b s c r i p t i o n s . r e m o v e ( t h i s ) ; 
                 } ; 
 
                 e x t e n d   =   f u n c t i o n ( o b j e c t ,   p r o p e r t i e s )   { 
                     v a r   k e y ,   v a l u e ; 
                     i f   ( p r o p e r t i e s   ! =   n u l l )   { 
                         f o r   ( k e y   i n   p r o p e r t i e s )   { 
                             v a l u e   =   p r o p e r t i e s [ k e y ] ; 
                             o b j e c t [ k e y ]   =   v a l u e ; 
                         } 
                     } 
                     r e t u r n   o b j e c t ; 
                 } ; 
 
                 r e t u r n   S u b s c r i p t i o n ; 
 
             } ) ( ) ; 
 
         } ) . c a l l ( t h i s ) ; 
         ( f u n c t i o n ( )   { 
             A c t i o n C a b l e . C o n s u m e r   =   ( f u n c t i o n ( )   { 
                 f u n c t i o n   C o n s u m e r ( u r l )   { 
                     t h i s . u r l   =   u r l ; 
                     t h i s . s u b s c r i p t i o n s   =   n e w   A c t i o n C a b l e . S u b s c r i p t i o n s ( t h i s ) ; 
                     t h i s . c o n n e c t i o n   =   n e w   A c t i o n C a b l e . C o n n e c t i o n ( t h i s ) ; 
                 } 
 
                 C o n s u m e r . p r o t o t y p e . s e n d   =   f u n c t i o n ( d a t a )   { 
                     r e t u r n   t h i s . c o n n e c t i o n . s e n d ( d a t a ) ; 
                 } ; 
 
                 C o n s u m e r . p r o t o t y p e . c o n n e c t   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . c o n n e c t i o n . o p e n ( ) ; 
                 } ; 
 
                 C o n s u m e r . p r o t o t y p e . d i s c o n n e c t   =   f u n c t i o n ( )   { 
                     r e t u r n   t h i s . c o n n e c t i o n . c l o s e ( { 
                         a l l o w R e c o n n e c t :   f a l s e 
                     } ) ; 
                 } ; 
 
                 C o n s u m e r . p r o t o t y p e . e n s u r e A c t i v e C o n n e c t i o n   =   f u n c t i o n ( )   { 
                     i f   ( ! t h i s . c o n n e c t i o n . i s A c t i v e ( ) )   { 
                         r e t u r n   t h i s . c o n n e c t i o n . o p e n ( ) ; 
                     } 
                 } ; 
 
                 r e t u r n   C o n s u m e r ; 
 
             } ) ( ) ; 
 
         } ) . c a l l ( t h i s ) ; 
     } ) . c a l l ( t h i s ) ; 
 
     i f   ( t y p e o f   m o d u l e   = = =   " o b j e c t "   & &   m o d u l e . e x p o r t s )   { 
         m o d u l e . e x p o r t s   =   A c t i o n C a b l e ; 
     }   e l s e   i f   ( t y p e o f   d e f i n e   = = =   " f u n c t i o n "   & &   d e f i n e . a m d )   { 
         d e f i n e ( A c t i o n C a b l e ) ; 
     } 
 } ) . c a l l ( t h i s ) ; 
   z       http://localhost:3000/assets/action_cable.self-69fddfcddf4fdef9828648f9330d6ce108b93b82b0b8d3affffc59a114853451.js?body=1     ;P      ;P                            
l Q Y Z 	   call!!                +H!!        C            <                                 	   -P     -P                   W  QV  W   Q        
V   l QV   5      Q       
V  l Q   '=   HE   Q   5            6   Q=      '=   HE   Q   5                Q>@B RB T 	   call   ActionCable   module   object   exports   define   function   amd!!      context   ActionCable   .this        +H!!        C                                             0     (                      W   Q        
V   l Q=> 	   call!!      .this         +H!!        C            X       	                          B     :                      W   QZ    5       QV   [   [   [    =   ]   =   ]   =   ]   =   ]   ]   =	   ]
   Z   =   `    =   `   ]   ]      5   ]      5   ]      ]      ]      ]      ]      ]      ]   6   Q



!-03=    slice   ActionCable   welcome	   ping)   confirm_subscription   confirmation'   reject_subscription   rejection   message_types   /cable%   default_mount_path'   actioncable-v1-json/   actioncable-unsupported   protocols   INTERNAL   window   WebSocket   console   logger   createConsumer   getConfig%   createWebSocketURL   startDebugging   stopDebugging   log!!      slice   .this        +H!!       !!   welcome!!!!	   ping!!!!   confirmation!!!!   rejection!!    !!       !!   message_types!!!!%   default_mount_path!!!!   protocols!!    !!          createConsumerC s                                   	       B  :  :  :                   W  QT  @B   V      
=   : W   @   V      V  5   5   U  Q  5   AV     
T  : ,  R 

     getConfig   url   INTERNAL%   default_mount_path   Consumer%   createWebSocketURL!!      url   ref   .this       +H;       5!!          getConfigC R                                            W  (  O  (                      5      
=   T  =   : W   QV   @   V      
=   :    >(


"    document	   head   querySelector1   meta[name='action-cable-   ']   getAttribute   content!!   	   name   element       +H;       5!!       %   createWebSocketURLC        	   4                         
        N    F    !   $             T  E   Q        
T  :  u         
=   : W   QV   T  6   QV   V   5   6   QV   V   5      
=   =   : 6   QV   5   
   T  p,), 	   test   document   createElement   a	   href   protocol   replace	   http   ws!!      url   a       +H!!   ^wss?:   ;       5!!          startDebuggingB          -       
       5 !!          stopDebuggingB    =    =  0      
       5!!          logB  T    L    3             5 !!    	   !!   INTERNAL!!!!   WebSocket!!!!   logger!!!!   createConsumer!!!!   getConfig!!!!%   createWebSocketURL!!!!   startDebugging!!!!   stopDebugging!!!!   log!!    ;5;5!!        C   k         e                         
          mO    mO  B                 W   Q        
V   l Q       
V   l Q       
V   l Q       
V   l Q       
V   l Q  C   |   }  }   0   1 Q 1 R 	   call!!      .this         +H!!        C                                                  o    o  C                         Q     :  6    Q
F!   #   ConnectionMonitor!!   	   bind         +H!!       	   bindC                                                ^    ^  D                      #6 !!      fn   me       +H!!          bind/<b  6  [  .  [  D   2   	       5 ;5!!       =   ActionCable.ConnectionMonitor<c   r                                             d    d  F                     W   QV   [   ]   ]   6    QV   6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6	   QV   5      6
   QV   5      6   QV   5   	   6   QV   5   
   6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   Q      Q      Q      QV   I

NV`imqx}                pollInterval   min   max   staleThreshold   prototype   start	   stop   isRunning   recordPing   recordConnect!   recordDisconnect   startPolling   stopPolling	   poll   getPollInterval!   reconnectIfStale#   connectionIsStale)   disconnectedRecently'   visibilityDidChange!!      clamp   now   secondsSince#   ConnectionMonitor        +H!!       #   ConnectionMonitor  ?                                          h	  
  N	  
  P   "             W   QV   T  6    QV     V   5   V   : 6   QV   >6   Q


    connection'   visibilityDidChange#   reconnectAttempts!!      connection   .this       +H;
       5 !!       !!   min!!!!   max!!    !!       C   ConnectionMonitor.prototype.startb  O
    G
    V   4          5 !!       A   ConnectionMonitor.prototype.stopb          `   3          5!!       K   ConnectionMonitor.prototype.isRunningb  H    @    i   8   
       5!!       M   ConnectionMonitor.prototype.recordPingb          m   9   
       5 !!       S   ConnectionMonitor.prototype.recordConnectb  N    F    q   <   
       5!!       Y   ConnectionMonitor.prototype.recordDisconnectb  O    G    x   ?   
       5 !!       Q   ConnectionMonitor.prototype.startPollingb    W    W  }   ;   
       5 !!       O   ConnectionMonitor.prototype.stopPollingb             :   
       5!!       A   ConnectionMonitor.prototype.pollb  	             3   
          B F    >       8             _this    B  k    c                 5 55!!       W   ConnectionMonitor.prototype.getPollIntervalb  A  A  9  A     >   
       5!!       Y   ConnectionMonitor.prototype.reconnectIfStaleb    @  {  @     ?   "       5!!       [   ConnectionMonitor.prototype.connectionIsStaleb      {       @   
       5!!       a   ConnectionMonitor.prototype.disconnectedRecentlyb  a    Y       C   
       5 !!       _   ConnectionMonitor.prototype.visibilityDidChangeb  !           B             B     }       '             _this    B                       555!!          nowB  6  k  .  k               5!!          secondsSinceB                      5 !!          clampB   7    7               5;5;5!!        C             G                                    15    15            	       Z    5       Q       QZ    5   D   Q      Q  5   W  QV  5      QV  5      Q      0         
   >      ?W   l    >W   QZ       Q   V   #?W   Q7W  Q     :  6   Q
#+-6 |    slice   indexOf   INTERNAL   message_types   protocols   length	   call   Connection!!	      i   message_types   protocols   ref%   supportedProtocols'   unsupportedProtocol   slice	   bind   indexOf        +H!!        	   bindC                                                V    V                        !6 !!      fn   me       +H!!          bind/<b  .  S  &  S     0   	       5 ;5!!          indexOf<b     x       (          5!!       /   ActionCable.Connection<c   I                                             &5    &5                       W   QV   X6    QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6   QV   5      6	   QV   5   	   6
   QV   5   
   6   QV   5      6   QV   5      6   QV   5   [      ]      ]      ]      ]   6   QV             ) / : B I
 ^
 h
 s
 x    reopenDelay   prototype	   send	   open   close   reopen   getProtocol   isOpen   isActive'   isProtocolSupported   isState   getState)   installEventHandlers-   uninstallEventHandlers   events   message   error!!      Connection         +H!!          Connection  w                                          b  k  O  k                  W   QV   T  6    QV      V   5   V   : 6   QV   V   5    5   6   QV     5   AV   ,  R 6   QV   C6   Q




    consumer	   open   subscriptions   monitor#   ConnectionMonitor   disconnected!!      consumer   .this       +H;
       5!!       3   Connection.prototype.sendb   S     S      ,          5!!       3   Connection.prototype.openb     "  z   "     ,   "       5 !!       5   Connection.prototype.closeb #  $  #  $     -          5 !!       7   Connection.prototype.reopenb  $  '  $  '    .   :       5!!       A   Connection.prototype.getProtocolb  Q'  '  I'  '    3   
       5 !!       7   Connection.prototype.isOpenb  '  $(  '  $(    .   
       5!!       ;   Connection.prototype.isActiveb  W(  (  O(  (     0   
       5!!       Q   Connection.prototype.isProtocolSupportedb  (  S)  (  S)  $  ;   
       5 !!       9   Connection.prototype.isStateb  )  C*  })  C*  )  /          5 !!       ;   Connection.prototype.getStateb  v*  +  n*  +  /  0          5!!       S   Connection.prototype.installEventHandlersb  +  ,  +  ,  :  <          5 !!       W   Connection.prototype.uninstallEventHandlersb  ,  -  ,  -  B  >             B  ~-  -  v-  -  E  7          5 5!!          messageB -  I1  -  I1  J            5!!       	   openB  c1  2  [1  2  ^            5!!          closeB 3  4  3  4  h            5 !!          errorB  4  4  4  4  s            5!!       !!   message!!!!	   open!!!!   close!!!!   error!!    ;5 ;5!!        C   %                                            L5  G  D5  G  }                 Z    5       Q      :  6   Q
     slice   Subscriptions!!      slice         +H!!        5   ActionCable.Subscriptions<c             ]                         
         5  
G  5  
G                      W   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV   5    	   6	   QV   5    
   6
   QV                  prototype   create   add   remove   reject   forget   findAll   reload   notifyAll   notify   sendCommand!!      Subscriptions         +H!!          Subscriptions  #                                           5  6  5  6                 W   QV   T  6    QV   Z    6   Q

    consumer   subscriptions!!      consumer   .this       +H;
       5 !!       =   Subscriptions.prototype.createb L6  7  D6  7    1   
       5 !!       7   Subscriptions.prototype.addb 7  8  7  8    .   
       5!!       =   Subscriptions.prototype.removeb 9  9  9  9    1          5!!       =   Subscriptions.prototype.rejectb #:  ;  :  ;    1          5!!       =   Subscriptions.prototype.forgetb ;  =  ;  =    1             subscription    s   B  0<  }=  (<  }=    (          5 5!!       ?   Subscriptions.prototype.findAllb =  5?  =  5?    2          5!!       =   Subscriptions.prototype.reloadb  i?  @  a?  @    1          5!!       C   Subscriptions.prototype.notifyAllb  @  B  @  B    4          5 !!       =   Subscriptions.prototype.notifyb  B  E  B  E    1   #       5!!       G   Subscriptions.prototype.sendCommandb E  F  E  F    6   
       5;5;5!!        C                                               0G  K  (G  K                           :  6    Q 0    Subscription!!              +H!!       3   ActionCable.Subscription<c   W          /                                  _G  K  WG  K                      W   QV   5       6   QV   5       6   QV   5       6   Q      QV       ,    prototype   perform	   send   unsubscribe!!      extend   Subscription        +H!!          Subscription G  wH  G  wH              5!!       =   Subscription.prototype.performb H  GI  H  GI    1          5!!       7   Subscription.prototype.sendb xI  .J  pI  .J    .   
       5!!       E   Subscription.prototype.unsubscribeb  fJ  J  ^J  J    5   
       5 !!          extendB J  K  J  K  !            5 ;5;5!!        C                                               L  \O  L  \O  1                        :  6    Q Q    Consumer!!              +H!!       +   ActionCable.Consumer<c   `          +                                  EL  QO  =L  QO  2                    W   QV   5       6   QV   5       6   QV   5       6   QV   5       6   QV    9 G M    prototype	   send   connect   disconnect-   ensureActiveConnection!!      Consumer         +H!!           Consumer  T                                          cL  M  RL  M  3               W   QV   T  6    QV      5   AV   ,  R 6   QV      5   AV   ,  R 6   Q


    url   subscriptions   Subscriptions   connection   Connection!!      url   .this       +H;
       5!!       /   Consumer.prototype.sendb <M  {M  4M  {M  9  *   
       5!!       5   Consumer.prototype.connectb  M  M  M  M  =  -   
       5 !!       ;   Consumer.prototype.disconnectb  N  |N  N  |N  A  0   
       5!!       S   Consumer.prototype.ensureActiveConnectionb  N  -O  N  -O  G  <          5 ;5;5;5;5;v      [`[`?X[]A|   z    :http://localhost:3000/assets/action_cable.self-69fddfcddf4fdef9828648f9330d6ce108b93b82b0b8d3affffc59a114853451.js?body=1 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Cache-Control: public, max-age=31536000
ETag: "69fddfcddf4fdef9828648f9330d6ce108b93b82b0b8d3affffc59a114853451"
X-Request-Id: c7d0921c-2d08-41a1-aa60-441524e379c8
X-Runtime: 0.019831
Content-Length: 20539
 original-response-headers Content-Type: application/javascript
Cache-Control: public, max-age=31536000
ETag: "69fddfcddf4fdef9828648f9330d6ce108b93b82b0b8d3affffc59a114853451"
X-Request-Id: c7d0921c-2d08-41a1-aa60-441524e379c8
X-Runtime: 0.019831
Content-Length: 20539
 uncompressed-len 0 net-response-time-onstart 30 net-response-time-onstop 30 alt-data 1;20539,javascript/moz-bytecode-20180704192850 alt-data-from-child 1  .